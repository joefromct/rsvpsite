(ns webapp.models.schema
  (:use korma.core
        [korma.db :only (defdb)]
        [clojure.walk])
  (:import javax.sql.DataSource, org.postgresql.ds.PGPoolingDataSource))

(def db-spec
  {:datasource
    (doto (new PGPoolingDataSource)
     (.setServerName   "localhost")
     (.setDatabaseName "webapp")
     (.setUser         "webapp")
     (.setPassword     "DrRoot13")
     (.setMaxConnections 30))})

(defdb db  db-spec)

(defentity entree )
(defentity guest-detail
  (table :guest_detail :guest-detail )
  (has-one entree) ) 

(defentity party )
  (has-many guest-detail ) 

#_(def db-spec
  {:subprotocol "postgresql"
   :subname "//localhost/webapp"
   :user "webapp"
   :password "DrRoot13"})
